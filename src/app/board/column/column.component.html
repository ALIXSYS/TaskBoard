<h3>
    <span class="icon icon-minus-squared-alt"
        title="Collapse All Tasks"
        *ngIf="!collapseTasks"
        (click)="toggleTaskCollapse()"></span>
    <span class="icon icon-plus-squared-alt"
        title="Expand All Tasks"
        *ngIf="collapseTasks"
        (click)="toggleTaskCollapse()"></span>

    {{ columnData.name }}

    <span class="badge" title="Tasks in Column">
        {{ tasks.length }}
    </span>

    <span class="icon icon-angle-double-up"
        title="Expand Column" (click)="toggleCollapsed()"></span>
    <span class="right icon icon-angle-double-down"
        title="Collapse Column" (click)="toggleCollapsed()"></span>
</h3>

<div class="quick-add">
    <input type="text" placeholder="Quick Add Task - Title Only">
    <button class="flat" (click)="showModal('Add')">
        <i class="icon icon-plus"></i>
    </button>
</div>

<div class="tasks">
    <div class="task" [ngClass]="{ 'compact': collapseTasks }">
        <h4>
            <span class="icon"
             [ngClass]="{ 'icon-minus-squared-alt': !collapseTasks,
             'icon-plus-squared-alt': collapseTasks }"
             title="Collapse Task"></span>
            Column Data
            <span class="badge right" title="Points">1</span>
        </h4>
        <div class="description">
            <pre style="margin: 0">{{ columnData | json }}</pre>
        </div>
        <div class="stats">
            Assigned To: admin
            <span class="right">
                <span class="icon icon-chat-empty" title="4 Comments"></span>
                <span class="icon icon-attach" title="2 Attachments"></span>
                <span class="category" title="Category">Front End</span>
            </span>
        </div>
    </div>
    <div class="task" [ngClass]="{ 'compact': collapseTasks }">
        <h4>
            <span class="icon"
             [ngClass]="{ 'icon-minus-squared-alt': !collapseTasks,
             'icon-plus-squared-alt': collapseTasks }"
             title="Collapse Task"></span>
            Something to Get Done
            <span class="badge right" title="Points">3</span>
        </h4>
        <div class="description">
            <p>This is the thing that needs to get done.</p>
        </div>
        <div class="stats">
            Assigned To: admin
            <span class="right">
                <span class="icon icon-chat-empty" title="4 Comments"></span>
                <span class="icon icon-attach" title="2 Attachments"></span>
                <span class="category" title="Category"></span>
            </span>
        </div>
    </div>
</div>

<!--<tb-modal modal-title="Confirm Task Removal" blocking="true">-->
<!--    <div class="center">Removing a task cannot be undone.<br>Continue?</div>-->
<!--    <div class="buttons">-->
<!--        <button class="flat"-->
<!--            (click)="removeUser()">Yes</button>-->
<!--        <button #defaultAction-->
<!--            (click)="modal.close(MODAL_CONFIRM_ID)">No</button>-->
<!--    </div>-->
<!--</tb-modal>-->

<tb-modal  *ngIf="activeBoard" modal-title="Add Task"
    modal-id="{{ MODAL_ID + columnData.id }}">
    <label>
        Title
        <input type="text" name="title" placeholder="Task Title"
            [(ngModel)]="modalProps.title">
    </label>

    <label>
        Description
        <textarea name="description" rows="5"
            placeholder="What needs to get done?"
            [(ngModel)]="modalProps.description"></textarea>
    </label>

    <label>
        Assignees
        <select name="assignees" multiple [(ngModel)]="modalProps.assignees">
            <option *ngFor="let user of activeBoard.users"
                [ngValue]="user">{{ user.username }}</option>
        </select>
    </label>

    <label>
        Categories
        <select name="categories" multiple [(ngModel)]="modalProps.categories">
            <option *ngFor="let category of activeBoard.categories"
                [ngValue]="category">{{ category.name }}</option>
        </select>
    </label>

    <div class="half">
        <label>
            Column
            <select name="column" [(ngModel)]="modalProps.column_id">
                <option *ngFor="let column of activeBoard.columns"
                    [ngValue]="column.id">{{ column.name }}</option>
            </select>
        </label>

        <label>
            Color
            <input type="color" [(ngModel)]="modalProps.color">
        </label>
    </div>

    <div class="half">
        <label>
            Date Due
            <input type="date" [(ngModel)]="modalProps.due_date">
        </label>

        <label>
            Points
            <input type="number" [(ngModel)]="modalProps.points">
        </label>
    </div>

    <div class="buttons">
        <button #defaultAction
            (click)="addTask()" [disabled]="saving">
            <i class="icon icon-plus"></i>
            Add Task
        </button>
        <button class="flat" (click)="modal.close(MODAL_ID + columnData.id)">
            Cancel
        </button>
    </div>
</tb-modal>

